import{j as e,t as s,l as i,a,n as l}from"./index-DoUp0PCT.js";import{d as t,u as r}from"./state-vendor-DirovB9V.js";import{p as n,B as o,V as d,W as c,h as x,w as p,X as m,Y as j,S as h,v as u,z as f,Z as g,H as y,M as v,_ as b}from"./ui-vendor-gif1NA3a.js";import{u as k,a as w,L as N,O as z}from"./router-vendor-BUZ_DrIH.js";import"./react-vendor-C4NSDPH-.js";import"./http-vendor-B2M11dG_.js";import"./editor-vendor-CFwGMUzF.js";const C=()=>{const i=t(),a="Dark"===r(e=>e.ui.theme),l=a?"切换至明亮模式":"切换至暗黑模式";return e.jsx(n,{title:l,placement:"bottom",children:e.jsx(o,{type:"text",size:"large",icon:a?e.jsx(d,{}):e.jsx(c,{}),onClick:()=>i(s()),style:{borderRadius:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",color:a?"#fbbf24":"#6366f1",fontSize:"16px"},className:"theme-toggle-btn"})})},{Text:S}=x,I=()=>{const s=t(),a=k(),{user:l,isAuthenticated:n}=r(e=>e.auth),d=[{key:"user-info",label:e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{fontWeight:500},children:null==l?void 0:l.username}),e.jsx(S,{type:"secondary",style:{fontSize:"12px"},children:null==l?void 0:l.email})]}),disabled:!0},{type:"divider"},{key:"profile",label:"个人资料",icon:e.jsx(p,{})},{key:"settings",label:"设置",icon:e.jsx(m,{}),disabled:!0},{type:"divider"},{key:"logout",label:"退出登录",icon:e.jsx(j,{}),danger:!0}];return n?e.jsx(g,{menu:{items:d,onClick:({key:e})=>{switch(e){case"profile":a("/profile");break;case"logout":s(i()),a("/login");break;case"login":a("/login");break;case"register":a("/register")}}},placement:"bottomRight",arrow:!0,trigger:["click"],children:e.jsx("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"4px 8px",borderRadius:"6px",transition:"background-color 0.2s"},className:"user-menu-trigger",children:e.jsxs(h,{children:[e.jsx(y,{size:"small",src:null==l?void 0:l.avatar,icon:e.jsx(p,{}),style:{backgroundColor:"#1890ff"}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(S,{style:{fontSize:"14px",fontWeight:500,lineHeight:1.2,maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:null==l?void 0:l.username}),e.jsx(S,{type:"secondary",style:{fontSize:"12px",lineHeight:1},children:"admin"===(null==l?void 0:l.role)?"管理员":"用户"})]})]})})}):e.jsxs(h,{children:[e.jsx(o,{type:"text",icon:e.jsx(u,{}),onClick:()=>a("/login"),children:"登录"}),e.jsx(o,{type:"primary",icon:e.jsx(f,{}),onClick:()=>a("/register"),size:"small",children:"注册"})]})},O=({onClick:s})=>{const i=t(),l=r(e=>e.ui.isSidebarOpen),d=l?"收起侧边栏":"展开侧边栏";return e.jsx(n,{title:d,children:e.jsx(o,{type:"text",icon:l?e.jsx(v,{}):e.jsx(b,{}),onClick:()=>{s?s():i(a())}})})},W=()=>{const s=w(),i=t(),n=r(e=>e.ui.isSidebarOpen),o="undefined"!=typeof window&&window.matchMedia("(max-width: 900px)").matches,d=()=>{o&&n&&i(a())};return e.jsxs("div",{className:"main-layout-grid",children:[e.jsxs("div",{className:`sidebar-area${o?" mobile":""}${n?" open":""}`,children:[e.jsx("div",{className:"text",children:"AI Code Analyzer"}),e.jsx("ul",{className:"sidebar-nav",children:l.map(i=>e.jsxs("li",{className:s.pathname===i.path?"active":"",onClick:d,children:[i.icon&&e.jsx("span",{className:"sidebar-icon",children:i.icon}),e.jsx(N,{to:i.path,children:i.name})]},i.path))})]}),o&&n&&e.jsx("div",{className:"sidebar-mask",onClick:()=>{n&&i(a())}}),e.jsxs("div",{className:"header-area",children:[e.jsx(O,{}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(I,{}),e.jsx(C,{})]})]}),e.jsx("div",{className:"content-area",children:e.jsx(z,{})})]})};export{W as default};
